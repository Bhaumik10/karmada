---
title: Separation of Karmada Component Certificates to Enhance Security and Compliance
authors:
  - "@tiansuo114"
reviewers:
  - "@zhzhuang-zju"
  - "@XiShanYongYe-Chang"

approvers:
  - "@zhzhuang-zju"
  - "@XiShanYongYe-Chang"

creation-date: 2025-03-07
---

# Separation of Karmada Component Certificates to Enhance Security and Compliance

## Summary

This proposal aims to restructure Karmada's certificate management system by issuing unique X.509 certificates for each core component, achieving standardization and security compliance. The project will establish a hierarchical certificate system based on a single root Certificate Authority (CA), issuing independent server certificates for 8 server components and dedicated client certificates for 11 client components. This ensures strong identity authentication for inter-component communication, eliminates security risks associated with shared certificates, and ultimately forms a certificate management solution that complies with industry standards.

## Motivation

The current Karmada architecture has the following certificate management deficiencies:

- Identity Confusion Risk: All components share the same certificate content, making it impossible to distinguish component identities through certificate Subject
- Security Vulnerabilities: A single certificate compromise would jeopardize the entire system's security, violating the principle of least privilege

The certificate-related modifications will primarily focus on the certificate generation logic in the `hack` script used for deploying Karmada clusters, serving as a preliminary experimental update. The reason for not updating other production deployment methods commonly used is that this certificate update is a very large-scale change, and due to the sensitive nature of certificate resources, it needs to undergo more community testing before attempting to synchronize the certificate creation, management, and usage logic to other deployment methods.

### Goals
Expected Outcome:
- Design a certificate isolation framework for Karmada that adheres to security recommendations.
- Complete the issuance of different certificates for 8 server components and import the certificate content into the corresponding certificate Secrets.
- Complete the issuance of different certificates for 11 client components and import the certificate content into the corresponding certificate Secrets or Config Secrets.

### Non-Goals

- Since certificate modifications may significantly impact existing production clusters, this update is limited to deployments using the hack script. Other commonly used deployment methods in production environments (such as karmada-operator, etc.) remain unchanged. If necessary, the overall modifications can be synchronized to other deployment methods in the future.


## Proposal

In the current system, the certificate usage for server and client components is as follows:

Definition of server and client components:
- If a component has behavior of connecting to other components, it can be considered a client component
- If a component has behavior of providing API endpoints, it can be considered a server component

Karmada currently has the following components:

- **8 Server Components:**
  1. karmada-apiserver (acts as both server and client)
  2. karmada-aggregated-apiserver (acts as both server and client)
  3. karmada-scheduler-estimator (acts as both server and client)
  4. karmada-metrics-adapter (acts as both server and client)
  5. karmada-webhook (acts as both server and client)
  6. karmada-search (acts as both server and client)
  7. etcd
  8. karmada-interpreter-webhook (acts as both server and client)
- **11 Client Components:**
  1. karmada-apiserver (connects to etcd)
  2. karmada-aggregated-apiserver (connects to etcd, apiserver)
  3. karmada-scheduler-estimator (connects to apiserver)
  4. karmada-controller-manager (connects to apiserver)
  5. karmada-metrics-adapter (connects to apiserver)
  6. karmada-webhook (connects to apiserver)
  7. karmada-search (connects to apiserver, etcd)
  8. karmada-descheduler (connects to apiserver, karmada-scheduler-estimator)
  9. karmada-scheduler (connects to apiserver, karmada-scheduler-estimator)
  10. karmada-interpreter-webhook (connects to apiserver)
  11. karmadactl (connects to apiserver)
  12. karmada-agent (connects to apiserver)

Current certificate allocation:

- **Server Components:**
  - Only apiserver and local etcd components have independent certificates
  - All other server components share the same certificate with `cn=karmda-admin`
  - Most components load certificates into containers through volume mounting

- **Client Components:**
  - All client components connecting to apiserver share the client certificate generated by karmada-apiserver, specifically for client interaction
  - All client components connecting to etcd share the etcd-client certificate generated by etcd
  - All client components connecting to karmada-scheduler-estimator use the gRPC verification certificate issued by karmada-scheduler-estimator

Special Cases:
1. For the two client components connecting to karmada-scheduler-estimator (karmada-scheduler and karmada-descheduler), since they use the gRPC protocol when connecting to karmada-scheduler-estimator, and they are the only components using gRPC protocol for this connection, the certificate is only used for TLS connection and does not contain identity verification attributes.
2. The karmada-interpreter-webhook component is currently still a demo component, and the modification of its certificate content will be temporarily postponed.

To address these issues and meet best practice requirements, each component should have an independent certificate that reflects its identity. The specific modification plan is as follows:

1. **Certificate Generation Logic Modification**
   - Modify the certificate generation logic in `hack/deploy-karmada.sh` script
   - Generate server certificates with unique CNs for each server component
   - Generate client certificates with unique CNs for each client component
   - Limit certificate SAN scope, avoiding wildcards
3. **Certificate Content Standardization**
   - Server certificates: Use precise DNS names and IP addresses
   - Client certificates: Remove unnecessary SAN information, focusing on identity
   - Unify certificate CN and O field formats for easier identification and management

### User Stories (Optional)

### Notes/Constraints/Caveats (Optional)

### Risks and Mitigations

## Design Details

### 1. Certificate Generation Script Modification

Current certificate generation process in `hack/deploy-karmada.sh`:

```bash
# Prepare the karmadaAltNames certificate SAN field.
karmadaAltNames=("*.karmada-system.svc.cluster.local" "*.karmada-system.svc" "localhost" "127.0.0.1" $(util::get_apiserver_ip_from_kubeconfig "${HOST_CLUSTER_NAME}") "${interpreter_webhook_example_service_external_ip_address}")

# 1. First create root CA
util::create_signing_certkey "" "${CERT_DIR}" ca karmada '"client auth","server auth"'

# 2. Create common certificates for servers using root CA
util::create_certkey "" "${CERT_DIR}" "ca" server server "" "${karmadaAltNames[@]}"
util::create_certkey "" "${CERT_DIR}" "ca" client system:admin system:masters "${karmadaAltNames[@]}"
util::create_certkey "" "${CERT_DIR}" "ca" front-proxy-client front-proxy-client "" "${karmadaAltNames[@]}"
util::create_certkey "" "${CERT_DIR}" "ca" etcd-server etcd-server "" "${karmadaAltNames[@]}"
util::create_certkey "" "${CERT_DIR}" "ca" etcd-client etcd-client "" "${karmadaAltNames[@]}"

# 3. Create service account key pair
util::create_key_pair "" "${CERT_DIR}" "sa"
```

Modified certificate generation logic:

```bash
# Prepare the karmadaAltNames certificate SAN field.
karmadaAltNames=("*.karmada-system.svc.cluster.local" "*.karmada-system.svc" "localhost" "127.0.0.1" $(util::get_apiserver_ip_from_kubeconfig "${HOST_CLUSTER_NAME}") "${interpreter_webhook_example_service_external_ip_address}")
# Define SAN names for each server component
karmada_apiserver_alt_names=("karmada-apiserver.karmada-system.svc.cluster.local" "karmada-apiserver.karmada-system.svc" "localhost" "127.0.0.1" $(util::get_apiserver_ip_from_kubeconfig "${HOST_CLUSTER_NAME}"))
karmada_aggregated_apiserver_alt_names=("karmada-aggregated-apiserver.karmada-system.svc.cluster.local" "karmada-aggregated-apiserver.karmada-system.svc" "localhost" "127.0.0.1")
karmada_webhook_alt_names=("karmada-webhook.karmada-system.svc.cluster.local" "karmada-webhook.karmada-system.svc" "localhost" "127.0.0.1")
...

# 1. Create root CA
util::create_signing_certkey "" "${CERT_DIR}" ca karmada '"client auth","server auth"'

# 2. Create independent certificates for each server component
# For the sake of description, I only present some examples of generating server-side certificates here
util::create_certkey "" "${CERT_DIR}" "ca" karmada-apiserver "system:karmada:karmada-apiserver" "" "${karmada_apiserver_alt_names[@]}"
util::create_certkey "" "${CERT_DIR}" "ca" karmada-aggregated-apiserver "system:karmada:karmada-aggregated-apiserver" "" "${karmada_aggregated_apiserver_alt_names[@]}"
util::create_certkey "" "${CERT_DIR}" "ca" karmada-webhook "system:karmada:karmada-webhook" "" "${karmada_webhook_alt_names[@]}"
...

# 3. Create client certificates for server components that need to connect to external components
# For the sake of description, I only present some examples of generating client-side certificates here
util::create_certkey "" "${CERT_DIR}" "ca" karmada-apiserver-etcd-client karmada-apiserver ""
util::create_certkey "" "${CERT_DIR}" "ca" karmada-aggregated-apiserver-etcd-client karmada-aggregated-apiserver "" 
...

# 4. Create service account key pair
util::create_key_pair "" "${CERT_DIR}" "sa"
```

### 2. Certificate Content Change Examples

Certificate content modifications mainly focus on:
1. Subject field CN and O values
2. SAN (Subject Alternative Name) scope
3. Certificate usage and permission settings

After modification certificate example:

**Server Certificate (`karmada-apiserver`)**

```
Certificate:
    Issuer: CN = karmada
    Subject: CN = system:karmada:karmada-apiserver
    X509v3 extensions:
        X509v3 Subject Alternative Name:
            DNS:karmada-apiserver.karmada-system.svc.cluster.local,
            DNS:karmada-apiserver.karmada-system.svc, 
            DNS:localhost, 
            IP Address:127.0.0.1, IP Address:172.18.0.2
```

Main improvements:
1. Uses component-specific CN (karmada-apiserver)
2. SAN uses precise DNS names, avoiding wildcards
3. Clearly identifies component identity and access scope

**Client Certificate (`karmada-scheduler`)**

```
Certificate:
    Issuer: CN = karmada
    Subject: O = system:masters, CN = system:karmada:karmada-scheduler
        X509v3 extensions:
            X509v3 Subject Alternative Name: 
```

Main improvements:
1. Uses standardized CN format (system:karmada:karmada-scheduler)
2. Removes unnecessary SAN information
3. Clearly identifies permission level through O field

These modifications result in:
1. Each component has a unique identity
2. Certificate access scope is more precise
3. Permission control is clearer
4. Complies with Kubernetes certificate best practices

### 3. Component Certificate Format Examples  

#### Karmada API Server

##### Server Certificate

The Server Certificate for Karmada API Server is used to encrypt and authenticate communication between the `karmada-apiserver` and clients. This certificate ensures that the `karmada-apiserver` can securely provide its service interface, while allowing clients to verify the server's authenticity, preventing man-in-the-middle attacks.

**Command Line Flags**
Passed via the `--tls-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:karmada-apiserver
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:karmada-apiserver.karmada-system.svc.cluster.local,
                DNS:karmada-apiserver.karmada-system.svc, DNS:localhost,
                IP Address:127.0.0.1, IP Address:${apiserver_service_ip_address}
```

##### ETCD Client Certificate

The ETCD Client Certificate for Karmada API Server is used for identity authentication when the `karmada-apiserver` accesses the ETCD data store. It ensures that only authorized API Server instances can read and write data in ETCD.

**Command Line Flags**
Passed via the `--etcd-certfile` flag

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-apiserver-etcd-client
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

##### Front Proxy Client Certificate

The Client Certificate for Front Proxy is used for communication authentication between the front proxy and `karmada-apiserver`. In Karmada's API aggregation architecture, the front proxy handles request forwarding from the aggregated API Server. This certificate ensures the security and trustworthiness of the request forwarding process.

**Command Line Flags**
Passed via the `--proxy-client-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: CN=front-proxy-client
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

#### Karmada Aggregated API Server

##### Server Certificate

The Server Certificate for Karmada Aggregated API Server is used for Karmada's API aggregation layer, allowing API extensions to be dynamically added to the core API Server. This certificate ensures the identity authentication of the Aggregated API Server and secures communication with other components. Through the `karmada-aggregated-apiserver`, Karmada can securely extend its API functionality.

**Command Line Flags**
Passed via the `--tls-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:karmada-aggregated-apiserver
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:karmada-aggregated-apiserver.karmada-system.svc.cluster.local, 
                DNS:karmada-aggregated-apiserver.karmada-system.svc, DNS:localhost, 
                IP Address:127.0.0.1
```

##### Client Certificate

The Client Certificate for Karmada Aggregated API Server is used for identity authentication when the `karmada-aggregated-apiserver` component communicates with the `karmada-apiserver` as a client. It allows the Karmada Aggregated API Server component to securely access API services and perform necessary operations. This certificate ensures that Karmada Aggregated API Server requests are correctly identified and authorized.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-aggregated-apiserver
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Subject Alternative Name:
```

##### ETCD Client Certificate

The ETCD Client Certificate for Karmada Aggregated API Server is used for identity authentication when the `karmada-aggregated-apiserver` accesses the ETCD data store. It ensures that the `karmada-aggregated-apiserver` can securely store and retrieve the state information of its extended API resources while maintaining appropriate access control.

**Command Line Flags**
Passed via the `--etcd-certfile` flag

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-aggregated-apiserver-etcd-client
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Subject Alternative Name:
```

#### Karmada Webhook

##### Server Certificate

The Server Certificate for Karmada Webhook is used to encrypt and authenticate communication between the `karmada-webhook` and the `karmada-apiserver`. The `karmada-webhook` is responsible for resource validation and admission control in Karmada, ensuring that all operations on resources comply with predefined rules.

**Command Line Flags**
Passed via the `--cert-dir` flag, automatically read from the directory

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:karmada-webhook
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:karmada-webhook.karmada-system.svc.cluster.local, 
                DNS:karmada-webhook.karmada-system.svc, DNS:localhost, 
                IP Address:127.0.0.1
```

##### Client Certificate

The Client Certificate for Karmada Webhook is used for identity authentication when the `karmada-webhook` component communicates with the `karmada-apiserver` as a client. It allows the Webhook component to securely access API services and perform necessary operations. This certificate ensures that Webhook requests are correctly identified and authorized.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-webhook
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

#### Karmada Search

##### Server Certificate

The Server Certificate for Karmada Search is used to encrypt and authenticate communication between `karmada-search` and clients. `karmada-search` provides cross-cluster resource search functionality, enabling administrators to quickly retrieve and query resources distributed across multiple clusters.

**Command Line Flags**
Passed via the `--tls-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:karmada-search
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:karmada-search.karmada-system.svc.cluster.local, 
                DNS:karmada-search.karmada-system.svc, DNS:localhost, 
                IP Address:127.0.0.1
```

##### Client Certificate

The Client Certificate for Karmada Search is used for communication authentication between `karmada-search` and `karmada-apiserver`. It allows the search service to securely query and retrieve cross-cluster resource information. This certificate ensures the security of search requests and proper control of data access permissions.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-search
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

##### ETCD Client Certificate

The ETCD Client Certificate for Karmada Search certificate is used for identity authentication when `karmada-search` accesses the ETCD data store. It allows `karmada-search` to securely retrieve resource information from ETCD while ensuring proper control of data access permissions.

**Command Line Flags**
Passed via the `--etcd-certfile` flag

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-search-etcd-client
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

#### Karmada Metrics Adapter

##### Server Certificate

The Server Certificate for Karmada Metrics Adapter is used to encrypt and authenticate communication between `karmada-metrics-adapter` and `karmada-apiserver`. `karmada-metrics-adapter` provides custom metrics API support, enabling Karmada to perform resource scheduling and auto-scaling based on custom metrics.

**Command Line Flags**
Passed via the `--tls-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:karmada-metrics-adapter
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:karmada-metrics-adapter.karmada-system.svc.cluster.local, 
                DNS:karmada-metrics-adapter.karmada-system.svc, DNS:localhost, 
                IP Address:127.0.0.1
```

##### Client Certificate

The Client Certificate for Karmada Metrics Adapter is used for communication authentication between `karmada-metrics-adapter` and `karmada-apiserver`. It allows the metrics adapter to securely access and provide custom metrics APIs. This certificate ensures secure query of metrics data and permission control.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-metrics-adapter
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

#### Karmada Scheduler Estimator

##### Server Certificate

The Server Certificate for Karmada Scheduler Estimator is used to encrypt and authenticate communication between `karmada-scheduler-estimator` and both `karmada-scheduler` and `karmada-descheduler`. `karmada-scheduler-estimator` provides cluster load estimation for scheduling decisions, helping Karmada make optimal resource allocation decisions.

**Command Line Flags**
Passed via the `--grpc-auth-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:karmada-scheduler-estimator
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:*.karmada-system.svc.cluster.local, DNS:*.karmada-system.svc, 
                DNS:localhost, 
                IP Address:127.0.0.1
```

#### ETCD

##### Server Certificate

The Server Certificate for ETCD is used to encrypt and authenticate communication between the ETCD server and clients. ETCD is Karmada's core data store, holding all cluster state information. This certificate is crucial for protecting the storage and access of this sensitive data, ensuring that only authorized components can read and write data in ETCD.

**Command Line Flags**
Passed via the `--key-file=` flag

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:etcd-server
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Alternative Name:
                DNS:etcd.karmada-system.svc.cluster.local, DNS:etcd.karmada-system.svc, 
                DNS:etcd-client.karmada-system.svc.cluster.local, 
                DNS:etcd-client.karmada-system.svc, DNS:localhost, 
                IP Address:127.0.0.1
```

##### ETCD Client Certificate

The ETCD Client Certificate for ETCD is a key security credential for the Karmada ETCD service's self-health check and internal communication, ensuring the security and availability of the ETCD service.

**Command Line Flags**
When building the etcd container, use the following command in the container

```bash
etcdctl get /registry --prefix --keys-only  --endpoints https://127.0.0.1:2379  --cacert /etc/karmada/pki/etcd-client/ca.crt --cert /etc/karmada/pki/etcd-client/tls.crt --key /etc/karmada/pki/etcd-client/tls.key
```

**Recommended CN and SAN Values**

```
Subject: CN=system:karmada:etcd-etcd-client
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Subject Alternative Name:
```

#### Karmada Controller Manager

##### Client Certificate

The Client Certificate for Karmada Controller Manager is used for communication authentication between `karmada-controller-manager` and `karmada-apiserver`. The controller manager contains multiple control loops responsible for maintaining the desired state of the cluster. This certificate ensures that the controller can securely interact with the `karmada-apiserver` to get and update resource states.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-controller-manager
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

#### Karmada Scheduler

##### Client Certificate

The Client Certificate for Karmada Scheduler is used for communication authentication between `karmada-scheduler` and `karmada-apiserver`. The scheduler is responsible for deciding which member clusters resources should be allocated to, making it a core component of Karmada's multi-cluster management.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-scheduler
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

##### GRPC Certificate

The GRPC Certificate for Karmada Scheduler is used to encrypt and authenticate gRPC communication between `karmada-scheduler` and `karmada-scheduler-estimator`. `karmada-scheduler` uses this channel to obtain cluster load estimation information for scheduling decisions. This certificate ensures the secure transmission of these critical performance data.

**Command Line Flags**
Passed via the `--scheduler-estimator-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-scheduler-grpc
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

#### Karmada Descheduler

##### Client Certificate

The Client Certificate for Karmada Descheduler is used for communication authentication between `karmada-descheduler` and `karmada-apiserver`. The descheduler is responsible for optimizing existing resource allocations by rescheduling to improve overall cluster efficiency. This certificate ensures the security and permission control of descheduling operations.

**Command Line Flags**
Passed via the `--kubeconfig` flag containing the certificate

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-descheduler
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```

##### GRPC Certificate

The GRPC Certificate for Karmada Descheduler is used to encrypt and authenticate gRPC communication between `karmada-descheduler` and `karmada-scheduler-estimator`. `karmada-descheduler` uses this channel to obtain cluster load information for scheduling decisions. This certificate ensures the secure transmission of these critical performance data.

**Command Line Flags**
Passed via the `--scheduler-estimator-cert-file` flag

**Recommended CN and SAN Values**

```
Subject: O=system:masters, CN=system:karmada:karmada-descheduler-grpc
Subject Public Key Info:
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Key Encipherment
            X509v3 Extended Key Usage:
                TLS Web Client Authentication, TLS Web Server Authentication
            X509v3 Basic Constraints: critical
                CA:FALSE
```


## Alternatives

<!--
What other approaches did you consider, and why did you rule them out? These do
not need to be as detailed as the proposal, but should include enough
information to express the idea and why it was not acceptable.
-->

<!--
Note: This is a simplified version of kubernetes enhancement proposal template.
https://github.com/kubernetes/enhancements/tree/3317d4cb548c396a430d1c1ac6625226018adf6a/keps/NNNN-kep-template
-->